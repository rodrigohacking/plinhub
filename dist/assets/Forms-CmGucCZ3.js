import{r as f,j as e,L as y,t as v,w as N}from"./index-DprZlJN8.js";import{S as D}from"./save-BDs7dtbN.js";function C({company:i,data:n,type:l,onSuccess:p}){const[r,w]=f.useState({}),[m,k]=f.useState(""),j=a=>{a.preventDefault();const c=new Date().toISOString();if(l==="add-sale"){const g={id:`sale_new_${Date.now()}`,companyId:i.id,date:r.date||c,amount:parseFloat(r.amount),channel:r.channel||"Online",seller:r.seller||"Sistema",client:r.client||"Cliente An√¥nimo",items:1,status:"conclu√≠da"};n.sales.unshift(g)}else if(l==="add-campaign"){const g={id:`camp_new_${Date.now()}`,companyId:i.id,name:r.name,investment:parseFloat(r.investment),leads:parseInt(r.leads||0),clicks:parseInt(r.clicks||0),impressions:parseInt(r.impressions||0),conversions:parseInt(r.conversions||0),channel:r.channel||"Outros"};n.campaigns.unshift(g)}else if(l==="set-goals"){n.goals||(n.goals=[]);const g=new Date().toISOString().slice(0,7),x=n.goals.findIndex(s=>s.companyId===i.id&&s.month===g),o={};Object.keys(r).forEach(s=>{if(s.startsWith("sdr_goal_rev_")){const d=s.replace("sdr_goal_rev_","");o[d]||(o[d]={}),o[d].revenue=parseFloat(r[s])||0}if(s.startsWith("sdr_goal_qty_")){const d=s.replace("sdr_goal_qty_","");o[d]||(o[d]={}),o[d].deals=parseInt(r[s])||0}});const u=x>=0?n.goals[x]:{},b={...u.sdrGoals||{}};Object.keys(o).forEach(s=>{b[s]={...b[s]||{},...o[s]}});const h={companyId:i.id,month:g,revenue:r.revenue_goal?parseFloat(r.revenue_goal):u.revenue||0,deals:r.deals_goal?parseInt(r.deals_goal):u.deals||0,leads:r.leads_goal?parseInt(r.leads_goal):u.leads||0,sdrGoals:b,updatedAt:c};x>=0?n.goals[x]={...n.goals[x],...h}:n.goals.push(h),console.log("Goals Saved:",h),v.success("Metas atualizadas com sucesso! üöÄ",{description:"O Dashboard foi sincronizado com as novas metas.",style:{background:"#10b981",color:"white",border:"none"}})}N(n),p()},t=a=>{w({...r,[a.target.name]:a.target.value})};return e.jsxs("div",{className:"max-w-2xl mx-auto bg-white dark:bg-[#111] p-8 rounded-2xl shadow-xl border border-gray-100 dark:border-white/5 animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("h2",{className:"text-xl font-bold mb-6 text-gray-900 dark:text-white flex items-center gap-2",children:[l==="add-sale"&&"Adicionar Nova Venda",l==="add-campaign"&&"Adicionar Nova Campanha",l==="set-goals"&&"Definir Metas Mensais"]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[l==="add-sale"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Valor Total (R$)"}),e.jsx("input",{required:!0,type:"number",name:"amount",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data"}),e.jsx("input",{required:!0,type:"date",name:"date",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Canal"}),e.jsxs("select",{name:"channel",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all",children:[e.jsx("option",{value:"Online",children:"Online"}),e.jsx("option",{value:"Loja F√≠sica",children:"Loja F√≠sica"}),e.jsx("option",{value:"Telefone",children:"Telefone"}),e.jsx("option",{value:"Marketplace",children:"Marketplace"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cliente"}),e.jsx("input",{type:"text",name:"client",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all",placeholder:"Nome do Cliente"})]})]}),l==="add-campaign"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome da Campanha"}),e.jsx("input",{required:!0,type:"text",name:"name",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Investimento (R$)"}),e.jsx("input",{required:!0,type:"number",name:"investment",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Canal"}),e.jsxs("select",{name:"channel",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all",children:[e.jsx("option",{value:"Google Ads",children:"Google Ads"}),e.jsx("option",{value:"Facebook",children:"Facebook"}),e.jsx("option",{value:"Instagram",children:"Instagram"}),e.jsx("option",{value:"Email",children:"Email"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Impress√µes"}),e.jsx("input",{type:"number",name:"impressions",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-sm text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Cliques"}),e.jsx("input",{type:"number",name:"clicks",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-sm text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Leads"}),e.jsx("input",{type:"number",name:"leads",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-sm text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Convers√µes"}),e.jsx("input",{type:"number",name:"conversions",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-sm text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all"})]})]})]}),l==="set-goals"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/10 border border-orange-100 dark:border-orange-500/20 rounded-xl mb-4",children:e.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"As metas ser√£o auditadas pelo gestor."]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 pb-6 border-b border-gray-100 dark:border-white/5 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Meta de Receita (MRR)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-3.5 text-gray-400 text-sm",children:"R$"}),e.jsx("input",{required:!0,type:"number",name:"revenue_goal",onChange:t,className:"w-full pl-10 p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all",placeholder:"60.000,00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Meta de Vendas (Qtd)"}),e.jsx("input",{required:!0,type:"number",name:"deals_goal",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all",placeholder:"16"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Meta de Leads (Marketing)"}),e.jsx("input",{required:!0,type:"number",name:"leads_goal",onChange:t,className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all",placeholder:"150"})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-white/5",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Metas Individuais (SDRs)"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Selecione o Vendedor para Definir a Meta"}),e.jsxs("select",{value:m,onChange:a=>k(a.target.value),className:"w-full p-3 border border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-white bg-white dark:bg-[#1a1a1a] focus:ring-2 focus:ring-[#FD295E] outline-none transition-all",children:[e.jsx("option",{value:"",children:"Selecione um vendedor..."}),e.jsx("option",{value:"all",children:"Ver Todos"}),Array.from(new Set(n.sales.filter(a=>a.companyId===i.id).map(a=>a.seller))).filter(a=>a!=="Sistema"&&a!=="SDR").sort().map((a,c)=>e.jsx("option",{value:a,children:a},c))]})]}),e.jsx("div",{className:"space-y-4",children:Array.from(new Set(n.sales.filter(a=>a.companyId===i.id).map(a=>a.seller))).filter(a=>a!=="Sistema"&&a!=="SDR").filter(a=>m?m==="all"?!0:a===m:!1).map((a,c)=>e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 p-4 rounded-xl flex flex-col md:flex-row items-center gap-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-200",children:a}),e.jsx("p",{className:"text-xs text-gray-400",children:"Vendedor"})]}),e.jsxs("div",{className:"flex-1 w-full grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Meta R$"}),e.jsx("input",{type:"number",name:`sdr_goal_rev_${a}`,onChange:t,placeholder:"15.000",className:"w-full p-2 border border-gray-200 dark:border-white/10 rounded-lg text-sm bg-white dark:bg-[#111] focus:ring-1 focus:ring-[#FD295E] outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Meta Qtd"}),e.jsx("input",{type:"number",name:`sdr_goal_qty_${a}`,onChange:t,placeholder:"4",className:"w-full p-2 border border-gray-200 dark:border-white/10 rounded-lg text-sm bg-white dark:bg-[#111] focus:ring-1 focus:ring-[#FD295E] outline-none"})]})]})]},c))})]})]}),e.jsxs("button",{type:"submit",className:"w-full py-4 bg-[#FD295E] hover:bg-[#e11d48] text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2 mt-6",children:[e.jsx(D,{className:"w-5 h-5"}),"Salvar Altera√ß√µes"]})]})]})}export{C as Forms};
