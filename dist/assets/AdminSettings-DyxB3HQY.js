import{c as h,r as d,g as de,j as e,L as v,U as le,t as m,s as ie,e as ne,x as ce,y as xe,b as $}from"./index-DprZlJN8.js";import{B as L}from"./building-DGwLmj9t.js";import{T as B}from"./trash-2-SQBzZP3E.js";import{U as V}from"./users-SxIuxT_U.js";import{U as G}from"./user-plus-Ptd6We4q.js";import{S as me}from"./save-BDs7dtbN.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=h("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=h("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=h("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=h("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=h("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=h("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=h("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=h("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);function we({company:s,onSave:U}){const[r,P]=d.useState({id:null,name:"",cnpj:"",logo:"",pipefyOrgId:"",pipefyPipeId:"",pipefyToken:"",wonPhase:"",wonPhaseId:"",lostPhase:"",lostPhaseId:"",qualifiedPhase:"",qualifiedPhaseId:"",valueField:"",lossReasonField:"",metaAdAccountId:"",metaToken:""}),[C,I]=d.useState([]),[p,D]=d.useState("idle"),[i,c]=d.useState({type:"",msg:"",error:!1}),[u,O]=d.useState(""),[F,_]=d.useState("editor"),[n,f]=d.useState(!0),[Q,b]=d.useState(!1),[y,k]=d.useState(""),[z,w]="",[j,q]=d.useState(!1),[g,A]=d.useState(!1);d.useEffect(()=>{if(s){(async()=>{try{try{await fetch("/api/companies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,name:s.name,cnpj:s.cnpj||"",logo:s.logo||""})})}catch(t){console.error("Failed to sync company to DB:",t)}try{const t=await fetch(`/api/companies/${s.id}/users`);if(t.ok){const x=await t.json();I(x)}}catch(t){console.error("Failed to fetch users from DB:",t),t.message.includes("Failed to fetch")||t.name==="TypeError"?m.error("Backend offline. Rode 'npm run dev' na pasta backend."):m.error("Erro ao carregar usu√°rios.")}P(t=>({...t,id:s.id,name:s.name,cnpj:s.cnpj||"",logo:s.logo||"",pipefyOrgId:s.pipefyOrgId||"",pipefyPipeId:s.pipefyPipeId||"",pipefyToken:s.pipefyToken||"",wonPhase:s.wonPhase||"",wonPhaseId:s.wonPhaseId||"",lostPhase:s.lostPhase||"",lostPhaseId:s.lostPhaseId||"",qualifiedPhase:s.qualifiedPhase||"",qualifiedPhaseId:s.qualifiedPhaseId||"",valueField:s.valueField||"",lossReasonField:s.lossReasonField||"",metaAdAccountId:s.metaAdAccountId||"",metaToken:s.metaToken||""}))}catch(t){console.error("Error loading settings:",t)}})();const o=!!de();q(!o),f(!0)}},[s]);const l=a=>{const{name:o,value:t}=a.target;P(x=>({...x,[o]:t}))},W=a=>{const o=a.target.files[0];if(o){const t=new FileReader;t.onloadend=()=>{P(x=>({...x,logo:t.result}))},t.readAsDataURL(o)}},X=async()=>{if(!u||!u.includes("@")){m.error("Por favor, insira um e-mail v√°lido.");return}try{const a=await fetch(`/api/companies/${r.id}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.trim(),role:F})});if(!a.ok)throw new Error("Failed to save user to DB");const o=await a.json();(await fetch("/api/invites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.trim(),companyId:r.id,role:F,companyName:r.name})})).ok?m.success(`Convite enviado para ${u}`):m.warning("Convite n√£o enviado (Backend offline), mas acesso foi salvo."),I(x=>[...x,o]),O("")}catch(a){console.error("Error adding user:",a),m.warning("Erro ao salvar usu√°rio. Verifique a conex√£o.")}},[N,S]=d.useState(null),[Y,T]=d.useState(!1),ee=a=>{S(a),T(!0)},ae=async()=>{if(N)try{await fetch(`/api/companies/${r.id}/users/${N}`,{method:"DELETE"}),I(a=>a.filter(o=>o.email!==N)),m.success("Usu√°rio removido.")}catch(a){console.error("Error removing user:",a),m.error("Erro ao remover usu√°rio.")}finally{T(!1),S(null)}},re=async()=>{if(!r.name){alert("Por favor, preencha o nome da empresa.");return}D("saving"),await $(r),D("success"),setTimeout(()=>{D("idle"),U&&U()},1e3)},M=()=>{if(j){if(y.length<4){w("O PIN deve ter pelo menos 4 d√≠gitos.");return}ie(y),q(!1),f(!1),b(!1),k(""),alert("PIN de seguran√ßa criado com sucesso!")}else ne(y)?(f(!1),b(!1),k(""),w("")):w("PIN incorreto. Tente novamente.")},se=async()=>{c({type:"pipefy",msg:"Testando conex√£o...",error:!1});try{const a=await ce(r.pipefyOrgId,r.pipefyPipeId,r.pipefyToken),o=Array.isArray(a)?a:a.deals||[],t=Array.isArray(a)?null:a.debug;if(o.length>0)c({type:"pipefy",msg:`Sucesso! Encontramos ${o.length} cards.`,error:!1});else{let x="Conex√£o OK, mas nenhum card encontrado.";t&&(x+=` (Fases: ${t.phasesFound}, Cards Raw: ${t.totalRaw})`,t.phasesFound>0&&t.totalRaw===0&&(x+=" O Pipe parece estar vazio.")),c({type:"pipefy",msg:x,error:!0})}}catch(a){c({type:"pipefy",msg:`Erro: ${a.message}`,error:!0})}},te=async()=>{c({type:"meta",msg:"Testando conex√£o...",error:!1});try{const a=await xe(r.metaAdAccountId,r.metaToken);a.length>0?c({type:"meta",msg:`Sucesso! Encontramos ${a.length} campanhas.`,error:!1}):c({type:"meta",msg:"Conex√£o OK, mas nenhuma campanha encontrada.",error:!0})}catch(a){c({type:"meta",msg:`Erro: ${a.message}`,error:!0})}},oe=async()=>{if(r.id){c({type:"sync",msg:"Sincronizando dados para a nuvem...",error:!1});try{await $(r),c({type:"sync",msg:"Sucesso! Dados enviados para o banco de dados.",error:!1}),m.success("Dados sincronizados com a nuvem!")}catch(a){console.error("Sync error:",a),c({type:"sync",msg:"Erro ao sincronizar. Verifique o console.",error:!0}),m.error("Erro na sincroniza√ß√£o.")}}};return s?e.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in duration-500 pb-12 relative",children:[Y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-2xl shadow-2xl p-8 max-w-sm w-full animate-in zoom-in-95 duration-200 border border-transparent dark:border-white/10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(B,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Remover Acesso?"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:["Tem certeza que deseja remover o acesso de ",e.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:N}),"?"]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{T(!1),S(null)},className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-medium hover:bg-gray-50 dark:hover:bg-white/5 rounded-lg",children:"Cancelar"}),e.jsx("button",{onClick:ae,className:"flex-1 py-3 bg-red-600 dark:bg-red-600 text-white font-bold rounded-lg hover:bg-red-700",children:"Sim, Remover"})]})]})}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-2xl shadow-2xl p-8 max-w-sm w-full animate-in zoom-in-95 duration-200 border border-transparent dark:border-white/10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-[#FD295E]/10 dark:bg-[#FD295E]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"w-8 h-8 text-[#FD295E] dark:text-[#FD295E]"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:j?"Criar PIN de Seguran√ßa":"Acesso Restrito"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:j?"Defina um PIN num√©rico para proteger os tokens de acesso.":"Digite seu PIN para visualizar ou editar os tokens."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{autoFocus:!0,type:"password",value:y,onChange:a=>k(a.target.value),placeholder:"Digite o PIN",className:"w-full text-center text-2xl tracking-[0.5em] font-bold p-3 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none text-gray-900 dark:text-white bg-white dark:bg-[#111]",onKeyDown:a=>a.key==="Enter"&&M(),maxLength:6}),z&&e.jsx("p",{className:"text-red-500 text-sm text-center font-medium",children:z}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{b(!1),w(""),k("")},className:"flex-1 py-3 text-gray-600 dark:text-gray-400 font-medium hover:bg-gray-50 dark:hover:bg-white/5 rounded-lg",children:"Cancelar"}),e.jsx("button",{onClick:M,className:"flex-1 py-3 bg-[#FD295E] text-white font-bold rounded-lg hover:bg-[#e11d48]",children:j?"Definir PIN":"Desbloquear"})]})]})]})}),e.jsxs("div",{className:"mb-8 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Configura√ß√µes da Empresa"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Gerencie os dados e integra√ß√µes de ",s.name]})]}),e.jsx("div",{className:"flex items-center gap-2",children:n?e.jsxs("button",{onClick:()=>b(!0),className:"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400 border border-amber-200 dark:border-amber-500/20 px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors",children:[e.jsx(v,{className:"w-4 h-4"})," Tokens Bloqueados"]}):e.jsxs("button",{onClick:()=>{f(!0),A(!1)},className:"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/20 px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors",children:[e.jsx(he,{className:"w-4 h-4"})," Tokens Liberados"]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-[#111] p-6 rounded-xl border border-gray-200 dark:border-white/5 shadow-sm",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),"Dados da Empresa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome da Empresa"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:l,className:"w-full p-3 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"CNPJ"}),e.jsx("input",{type:"text",name:"cnpj",value:r.cnpj,onChange:l,placeholder:"00.000.000/0001-00",className:"w-full p-3 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Logo da Empresa"}),e.jsxs("div",{className:"flex items-center gap-4",children:[r.logo&&e.jsx("div",{className:"w-20 h-20 rounded-lg border border-gray-200 dark:border-white/10 p-2 bg-gray-50 dark:bg-white/5 flex items-center justify-center shrink-0",children:e.jsx("img",{src:r.logo,alt:"Logo",className:"max-w-full max-h-full object-contain rounded"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-[#FD295E]/10 dark:file:bg-[#FD295E]/20 file:text-[#FD295E] dark:file:text-[#FD295E] hover:file:bg-[#FD295E]/20 dark:hover:file:bg-[#FD295E]/30 cursor-pointer"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Carregue uma imagem (PNG, JPG) para usar como logo."})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#111] p-6 rounded-xl border border-gray-200 dark:border-white/5 shadow-sm relative overflow-hidden",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),"Gest√£o de Acesso"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Usu√°rios com Acesso"}),!C||C.length===0?e.jsxs("div",{className:"p-8 border border-dashed border-gray-200 dark:border-white/10 rounded-xl text-center",children:[e.jsx(V,{className:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Nenhum usu√°rio cadastrado."})]}):e.jsx("div",{className:"space-y-2",children:C.map((a,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-white/10 flex items-center justify-center text-gray-500 dark:text-gray-300",children:e.jsx("span",{className:"text-xs font-bold",children:a.email.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[a.email,a.status==="pending"&&e.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400 px-1.5 py-0.5 rounded font-bold uppercase",children:"Pendente"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${a.role==="admin"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400":a.role==="editor"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-600 dark:bg-white/10 dark:text-gray-400"}`,children:a.role==="admin"?"Administrador":a.role==="editor"?"Colaborador":"Leitor"})})]})]}),e.jsx("button",{onClick:()=>ee(a.email),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Remover acesso",children:e.jsx(B,{className:"w-4 h-4"})})]},o))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-white/[0.02] border border-gray-100 dark:border-white/5 rounded-xl p-5 h-fit",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-[#FD295E]"}),"Adicionar Usu√°rio"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"E-mail do Usu√°rio"}),e.jsx("input",{type:"email",value:u,onChange:a=>O(a.target.value),placeholder:"usuario@email.com",className:"w-full p-2.5 bg-white dark:bg-[#111] border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-[#FD295E] outline-none"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"N√≠vel de Acesso"}),e.jsxs("select",{value:F,onChange:a=>_(a.target.value),className:"w-full p-2.5 bg-white dark:bg-[#111] border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-[#FD295E] outline-none appearance-none",children:[e.jsx("option",{value:"admin",children:"Administrador (Total)"}),e.jsx("option",{value:"editor",children:"Colaborador (Editor)"}),e.jsx("option",{value:"viewer",children:"Leitor (Apenas Visualiza√ß√£o)"})]})]}),e.jsxs("button",{onClick:X,className:"w-full py-2.5 bg-black dark:bg-white text-white dark:text-black font-medium rounded-lg hover:opacity-90 transition-opacity text-sm flex items-center justify-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Conceder Acesso"]}),e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-white/5",children:e.jsxs("div",{className:"flex gap-2 items-start text-[10px] text-gray-500 dark:text-gray-400 leading-tight",children:[e.jsx(ge,{className:"w-3 h-3 shrink-0 mt-0.5"}),e.jsx("p",{children:"Usu√°rios ter√£o acesso apenas aos dados desta empresa conforme o n√≠vel selecionado."})]})})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#111] p-6 rounded-xl border border-gray-200 dark:border-white/5 shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 sm:gap-0",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-8 bg-[#FD295E] rounded-full"}),"Integra√ß√£o Pipefy"]}),e.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:e.jsxs("button",{onClick:se,className:"text-sm text-[#FD295E] dark:text-[#FD295E] hover:text-[#e11d48] dark:hover:text-[#FD295E]/70 font-medium flex items-center gap-1",children:[e.jsx(Z,{className:"w-4 h-4"})," Testar Conex√£o"]})})]}),n&&e.jsxs("div",{className:"absolute inset-x-0 bottom-0 top-16 bg-white/60 dark:bg-black/60 backdrop-blur-sm z-10 flex flex-col items-center justify-center text-center p-6 border-t border-gray-100 dark:border-white/5",children:[e.jsx(v,{className:"w-10 h-10 text-gray-400 dark:text-gray-500 mb-2"}),e.jsx("h4",{className:"text-gray-800 dark:text-white font-bold",children:"√Årea Protegida"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 max-w-xs",children:"Para visualizar ou editar tokens sens√≠veis, √© necess√°rio desbloquear o acesso."}),e.jsxs("button",{onClick:()=>b(!0),className:"bg-gray-900 dark:bg-white text-white dark:text-black px-6 py-2 rounded-lg font-medium hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors flex items-center gap-2 shadow-lg",children:[e.jsx(H,{className:"w-4 h-4"})," Inserir PIN de Acesso"]})]}),i.type==="pipefy"&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm flex items-center gap-2 ${i.error?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[i.error?e.jsx(R,{className:"w-4 h-4"}):e.jsx(E,{className:"w-4 h-4"}),i.msg]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Organization ID"}),e.jsx("input",{type:"text",name:"pipefyOrgId",value:r.pipefyOrgId,onChange:l,placeholder:"Ex: 300567",className:"w-full p-2 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pipe ID"}),e.jsx("input",{type:"text",name:"pipefyPipeId",value:r.pipefyPipeId,onChange:l,placeholder:"Ex: 1029384",className:"w-full p-2 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2 relative",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Personal Access Token"}),!n&&e.jsxs("button",{type:"button",onClick:()=>A(!g),className:"text-xs text-[#FD295E] dark:text-[#FD295E] hover:underline flex items-center gap-1",children:[g?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}),g?"Ocultar":"Mostrar"]})]}),e.jsx("input",{type:g&&!n?"text":"password",name:"pipefyToken",value:r.pipefyToken,onChange:l,disabled:n,placeholder:"Bearer token...",className:`w-full p-2 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none font-mono text-black dark:text-white ${n?"bg-gray-50 dark:bg-white/5":"bg-white dark:bg-[#1a1a1a]"}`})]})]}),!n&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100 dark:border-white/5 animate-in fade-in slide-in-from-top-4 duration-500",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:"üõ†Ô∏è Mapeamento de Campos (Avan√ßado)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3 p-3 bg-gray-50 dark:bg-white/5 rounded-lg border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-green-700 dark:text-green-400 uppercase",children:"Fase GANHO (Nome)"}),e.jsx("input",{type:"text",name:"wonPhase",value:r.wonPhase,onChange:l,placeholder:"Ex: Contato Assinado",className:"w-full p-2 text-sm border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-green-700 dark:text-green-400 uppercase",children:"Fase GANHO (ID)"}),e.jsx("input",{type:"text",name:"wonPhaseId",value:r.wonPhaseId||"",onChange:l,placeholder:"Ex: 3045678",className:"w-full p-2 text-sm border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none font-mono text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-gray-50 dark:bg-white/5 rounded-lg border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-red-700 dark:text-red-400 uppercase",children:"Fase PERDIDO (Nome)"}),e.jsx("input",{type:"text",name:"lostPhase",value:r.lostPhase,onChange:l,placeholder:"Ex: Perdido",className:"w-full p-2 text-sm border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-red-700 dark:text-red-400 uppercase",children:"Fase PERDIDO (ID)"}),e.jsx("input",{type:"text",name:"lostPhaseId",value:r.lostPhaseId||"",onChange:l,placeholder:"Ex: 338889931",className:"w-full p-2 text-sm border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none font-mono text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-gray-50 dark:bg-white/5 rounded-lg border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Nome do Campo: Valor"}),e.jsx("input",{type:"text",name:"valueField",value:r.valueField,onChange:l,placeholder:"Ex: Valor mensal...",className:"w-full p-2 text-sm border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-[#FD295E] outline-none text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Nome do Campo: Motivo Perda"}),e.jsx("input",{type:"text",name:"lossReasonField",value:r.lossReasonField,onChange:l,placeholder:"Ex: Motivo da perda",className:"w-full p-2 text-sm border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#111] p-6 rounded-xl border border-gray-200 dark:border-white/5 shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 sm:gap-0",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-8 bg-blue-400 rounded-full"}),"Integra√ß√£o Meta Ads"]}),e.jsxs("button",{onClick:te,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium flex items-center gap-1",children:[e.jsx(Z,{className:"w-4 h-4"})," Testar Conex√£o"]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-white/5 border border-dashed border-gray-200 dark:border-white/10 rounded-lg flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{className:"text-gray-900 dark:text-white block mb-1",children:"Sincroniza√ß√£o Nuvem"}),"Se os dados n√£o aparecem no celular, clique aqui para for√ßar o envio."]}),e.jsxs("button",{onClick:oe,className:"whitespace-nowrap bg-gray-900 dark:bg-white text-white dark:text-black px-4 py-2 rounded-lg text-sm font-bold hover:bg-black dark:hover:bg-gray-200 flex items-center gap-2 transition-colors",children:[e.jsx(le,{className:"w-4 h-4"}),"For√ßar Envio Agora"]})]}),i.type==="sync"&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm flex items-center gap-2 ${i.error?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[i.error?e.jsx(R,{className:"w-4 h-4"}):e.jsx(E,{className:"w-4 h-4"}),i.msg]}),n&&e.jsxs("div",{className:"absolute inset-x-0 bottom-0 top-16 bg-white/60 dark:bg-black/60 backdrop-blur-sm z-10 flex flex-col items-center justify-center text-center p-6 border-t border-gray-100 dark:border-white/5",children:[e.jsx(v,{className:"w-10 h-10 text-gray-400 dark:text-gray-500 mb-2"}),e.jsx("h4",{className:"text-gray-800 dark:text-white font-bold",children:"√Årea Protegida"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 max-w-xs",children:"Para visualizar ou editar tokens sens√≠veis, √© necess√°rio desbloquear o acesso."}),e.jsxs("button",{onClick:()=>b(!0),className:"bg-gray-900 dark:bg-white text-white dark:text-black px-6 py-2 rounded-lg font-medium hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors flex items-center gap-2 shadow-lg",children:[e.jsx(H,{className:"w-4 h-4"})," Inserir PIN de Acesso"]})]}),i.type==="meta"&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm flex items-center gap-2 ${i.error?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[i.error?e.jsx(R,{className:"w-4 h-4"}):e.jsx(E,{className:"w-4 h-4"}),i.msg]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ad Account ID"}),e.jsx("input",{type:"text",name:"metaAdAccountId",value:r.metaAdAccountId,onChange:l,placeholder:"Ex: act_123456789",className:"w-full p-2 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-black dark:text-white bg-white dark:bg-[#1a1a1a]"})]}),e.jsxs("div",{className:"space-y-2 relative",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Access Token"}),!n&&e.jsxs("button",{type:"button",onClick:()=>A(!g),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[g?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}),g?"Ocultar":"Mostrar"]})]}),e.jsx("input",{type:g&&!n?"text":"password",name:"metaToken",value:r.metaToken,onChange:l,disabled:n,placeholder:"EAAB...",className:`w-full p-2 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono text-black dark:text-white ${n?"bg-gray-50 dark:bg-white/5":"bg-white dark:bg-[#1a1a1a]"}`})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:re,disabled:p==="saving",className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl font-semibold transition-colors disabled:opacity-50",children:[p==="saving"?"Salvando...":p==="success"?"Salvo!":"Salvar Configura√ß√µes",p==="success"?e.jsx(E,{className:"w-5 h-5"}):e.jsx(me,{className:"w-5 h-5"})]})})]})]}):e.jsx("div",{className:"max-w-4xl mx-auto animate-in fade-in duration-500 pb-12",children:e.jsxs("div",{className:"bg-white dark:bg-[#111] p-12 rounded-xl border border-gray-200 dark:border-white/5 shadow-sm text-center",children:[e.jsx(L,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Nenhuma empresa selecionada"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Selecione uma empresa para configurar."})]})})}export{we as AdminSettings};
